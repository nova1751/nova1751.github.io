#!/usr/bin/env node
'use strict';

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

var _crossSpawn = require('cross-spawn');

var _crossSpawn2 = _interopRequireDefault(_crossSpawn);

var _updateNotifier = require('update-notifier');

var _updateNotifier2 = _interopRequireDefault(_updateNotifier);

var _package = require('../../package');

var _package2 = _interopRequireDefault(_package);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const defaultCommand = 'try';

const commands = new Set([defaultCommand, 'init']);

let cmd = process.argv[2];
let args;

if (commands.has(cmd)) {
  args = process.argv.slice(3);
} else {
  cmd = defaultCommand;
  args = process.argv.slice(2);
}

const bin = _path2.default.join(__dirname, `miku-${ cmd }`);

const proc = (0, _crossSpawn2.default)(bin, args, {
  stdio: 'inherit',
  customFds: [0, 1, 2]
});

proc.on('close', code => process.exit(code));
proc.on('error', err => {
  console.error(err);
  process.exit(1);
});

(0, _updateNotifier2.default)({ pkg: _package2.default }).notify();